# Proyecto SaritaUnificado - Documentaci√≥n Funcional Definitiva

## 1. Introducci√≥n

**SaritaUnificado** es una plataforma tur√≠stica integral de "triple v√≠a" dise√±ada para crear un ecosistema digital cohesivo entre turistas, empresarios del sector y las entidades gubernamentales que regulan la actividad tur√≠stica.

1.  **V√≠a del Turista:** Un portal p√∫blico y atractivo para descubrir, planificar y reservar experiencias en la regi√≥n.
2.  **V√≠a del Empresario:** Un potente panel de control privado para que los prestadores de servicios y artesanos gestionen su negocio, su oferta y su interacci√≥n con los clientes.
3.  **V√≠a de la Gobernanza:** Herramientas para que las entidades administrativas (secretar√≠as, direcciones de turismo, etc.) supervisen, validen y fomenten el ecosistema tur√≠stico.

Este documento sirve como gu√≠a completa de todas las funcionalidades del sistema, segmentadas por el tipo de usuario y su rol.

---

## 2. Arquitectura del Sistema

*   **Backend:** API RESTful robusta construida con **Django** y **Django REST Framework**.
*   **Inteligencia Artificial:** Sistema de agentes aut√≥nomos jer√°rquicos construido con **LangChain** y **LangGraph**.
*   **Frontend:** Aplicaci√≥n de P√°gina √önica (SPA) moderna y reactiva, construida con **Next.js 15** y **TypeScript**.
*   **Base de Datos:** SQLite para desarrollo, preparada para PostgreSQL en producci√≥n.

---

## 3. Funcionalidades para el Turista (Cara al P√∫blico)

El portal p√∫blico es la puerta de entrada para los visitantes y el escaparate de la oferta tur√≠stica de la regi√≥n.

### 3.1. P√°ginas de Contenido y Descubrimiento

| P√°gina | Funcionalidad |
| :--- | :--- |
| **Inicio** | Una p√°gina de bienvenida din√°mica con componentes visuales (banners, sliders) que destacan los principales atractivos y noticias. |
| **Conoce Nuestro Municipio**| Una secci√≥n rica en contenido que incluye: la **historia** del municipio, una gu√≠a de **sitios de inter√©s** y un listado de **atractivos tur√≠sticos** detallados con fotos y descripciones. |
| **Rutas Tur√≠sticas** | Un apartado dedicado a las rutas tur√≠sticas oficiales, donde cada ruta tiene su propia p√°gina con descripci√≥n, mapa y los atractivos y prestadores que la componen. |
| **P√°ginas Institucionales**| Secciones dedicadas a las entidades gubernamentales, como la **Secretar√≠a de Turismo**, la **Direcci√≥n de Turismo** y el **Consejo Municipal de Turismo**, donde publican informaci√≥n oficial, pol√≠ticas y noticias. |
| **Directorio Tur√≠stico** | El coraz√≥n del portal. Un buscador potente que permite a los turistas encontrar y filtrar todo tipo de **prestadores de servicios** (hoteles, restaurantes, agencias, etc.) y **artesanos**. |

### 3.2. Interacci√≥n y Planificaci√≥n

| Funcionalidad | Descripci√≥n |
| :--- | :--- |
| **Perfil P√∫blico del Prestador**| Cada prestador y artesano tiene una p√°gina de detalle con su informaci√≥n completa: descripci√≥n, datos de contacto, redes sociales, **galer√≠a de fotos**, y un mapa con su ubicaci√≥n. |
| **Cat√°logo de Servicios** | El perfil p√∫blico muestra los **productos, paquetes o servicios** que el empresario ha configurado en su panel privado, permitiendo al turista conocer la oferta. |
| **Calendario de Disponibilidad**| En el perfil de prestadores que ofrecen servicios reservables (hoteles, gu√≠as), el turista puede ver un **calendario en tiempo real** que muestra los d√≠as disponibles y ocupados. |
| **Sistema de Reservas** | El turista puede seleccionar una fecha disponible en el calendario y enviar una **solicitud de reserva** directamente al prestador. |
| **Sistema de Valoraciones** | Despu√©s de su visita, el turista puede dejar una **calificaci√≥n con estrellas y un comentario** en el perfil del prestador, que ser√° visible p√∫blicamente una vez aprobado por un administrador. |
| **Registro y "Mi Viaje"** | Al crear una cuenta de "Turista", el usuario puede guardar sus atractivos y prestadores favoritos en una secci√≥n personalizada para planificar su viaje. |

---

## 4. Gu√≠a de Roles de Usuario

El sistema define roles espec√≠ficos con permisos y funcionalidades adaptadas a cada necesidad.

### 4.1. Rol Turista

| Panel / Vista | Funcionalidades |
| :--- | :--- |
| **Sitio P√∫blico** | Acceso a todas las funcionalidades descritas en la secci√≥n 3. |
| **Panel "Mi Viaje"**| Tras iniciar sesi√≥n, accede a un panel sencillo para ver y gestionar los elementos que ha guardado como favoritos. |

### 4.2. Rol Artesano

| Panel / Vista | Funcionalidades |
| :--- | :--- |
| **Panel de Artesano** | Un panel de control privado que incluye: gesti√≥n de **perfil** (nombre del taller, descripci√≥n, fotos), gesti√≥n de **productos artesanales**, y visualizaci√≥n de **valoraciones** recibidas. |

### 4.3. Rol Prestador de Servicios Tur√≠sticos

El panel de administraci√≥n m√°s completo, con m√≥dulos que se activan seg√∫n la categor√≠a del negocio.

#### M√≥dulos Gen√©ricos (Para todos los prestadores)

| M√≥dulo | Funcionalidad Detallada |
| :--- | :--- |
| **Perfil** | CRUD completo de la informaci√≥n p√∫blica del negocio. |
| **Productos/Servicios** | CRUD del cat√°logo de ofertas. |
| **Clientes (CRM)** | CRUD de la base de datos de clientes para seguimiento y fidelizaci√≥n. |
| **Galer√≠a** | CRUD de la galer√≠a de im√°genes del perfil p√∫blico. |
| **Documentos** | Subida de documentos legales y visualizaci√≥n de su estado de verificaci√≥n. |
| **Valoraciones** | Visualizaci√≥n de rese√±as y la capacidad de escribir una respuesta p√∫blica. |
| **Estad√≠sticas** | Visualizaci√≥n de m√©tricas de rendimiento (reservas, ingresos, etc.). |
| **Reservas (RAT)** | Calendario interactivo para gestionar todas las reservas con `drag-and-drop` y estados visuales. |

#### M√≥dulos Espec√≠ficos (Activados por Categor√≠a)

| Categor√≠a | M√≥dulos Espec√≠ficos |
| :--- | :--- |
| üè® **Hotel** | **Habitaciones:** CRUD para gestionar tipos de habitaciones, capacidad y precios. |
| üçΩÔ∏è **Restaurante** | **Men√∫/Carta** y **Mesas:** CRUD para gestionar categor√≠as, productos y mesas del local. |
| üß≠ **Gu√≠a Tur√≠stico**| **Mis Rutas:** CRUD para gestionar las rutas y tours que ofrece. |
| üöê **Transporte** | **Veh√≠culos:** CRUD para gestionar la flota de veh√≠culos. |
| üèùÔ∏è **Agencia de Viajes**| **Paquetes:** CRUD para crear y gestionar paquetes tur√≠sticos. |

### 4.4. Roles Administrativos

Gestionan el sistema desde un panel de administraci√≥n central (Django Admin) con distintos niveles de permisos.

| Rol | Capacidades Principales |
| :--- | :--- |
| üëë **Admin General** | **Control total.** Puede gestionar usuarios, contenido, configuraciones del sitio, categor√≠as, y tiene acceso a todas las funcionalidades de los roles inferiores. Es el superusuario del sistema. |
| üèõÔ∏è **Admin de Entidad** | **Gesti√≥n a nivel de su entidad (Municipal o Departamental).** Puede aprobar prestadores y artesanos dentro de su jurisdicci√≥n, gestionar contenido relacionado con su entidad y supervisar la actividad local. |
| üëî **Funcionario Directivo**| **Rol de supervisi√≥n y aprobaci√≥n.** Puede aprobar publicaciones y contenido generado por funcionarios profesionales antes de que pasen a la aprobaci√≥n final del Admin. Tiene acceso a reportes y estad√≠sticas. |
| üíº **Funcionario Profesional**| **Rol de creaci√≥n de contenido.** Es el encargado de crear y gestionar el contenido de las p√°ginas p√∫blicas (atractivos, rutas, noticias, eventos). Su trabajo pasa por un flujo de aprobaci√≥n. |

---

## 5. Sistema de Asistencia con Inteligencia Artificial

SaritaUnificado integra un sistema avanzado de agentes de IA para automatizar tareas, responder preguntas y asistir a los usuarios de manera proactiva.

### 5.1. Arquitectura Jer√°rquica de Agentes

El sistema utiliza una estructura de mando inspirada en una jerarqu√≠a militar, construida con LangGraph, para delegar tareas de forma eficiente:

1.  **Coronel:** Es el agente principal que recibe todas las √≥rdenes de los usuarios a trav√©s de la interfaz de chat. Su funci√≥n es analizar la solicitud y delegarla al Capit√°n m√°s adecuado para la tarea.
2.  **Capitanes:** Son agentes especializados por dominio (ej. `prestadores_captain`, `atractivos_captain`). Reciben la orden del Coronel y la desglosan en tareas m√°s peque√±as, deleg√°ndolas a los Tenientes.
3.  **Tenientes:** Son sub-especialistas (ej. `hoteles_teniente`, `restaurantes_teniente`). Gestionan un tipo de recurso espec√≠fico.
4.  **Sargentos (Herramientas):** En la pr√°ctica, los Tenientes ejecutan "herramientas", que son funciones de Python que interact√∫an directamente con la base de datos (el "trabajo de campo").

Este modelo permite una alta especializaci√≥n y eficiencia en la ejecuci√≥n de tareas complejas.

### 5.2. Funcionalidades del Chat de IA

| Funcionalidad | Descripci√≥n |
| :--- | :--- |
| **Interfaz de Chat** | Un componente de chat disponible en el sistema permite a los usuarios (principalmente administradores) interactuar con el agente Coronel usando lenguaje natural. |
| **Ejecuci√≥n de Tareas** | Los usuarios pueden solicitar tareas complejas como: "Crea una nueva publicaci√≥n de evento sobre el Festival de Verano", "Genera un informe de los 5 hoteles con m√°s reservas" o "Actualiza la descripci√≥n del atractivo tur√≠stico 'Cascada La Cristalina'". |
| **Seguimiento de Tareas**| El sistema registra cada orden en el modelo `AgentTask`, permitiendo a los administradores ver el estado de las tareas (Pendiente, En Ejecuci√≥n, Completada, Fallida) y el informe final generado por el agente. |

### 5.3. Personalizaci√≥n por Usuario

| Funcionalidad | Descripci√≥n |
| :--- | :--- |
| **Configuraci√≥n de LLM** | A trav√©s del modelo `UserLLMConfig`, cada usuario puede, desde su perfil, configurar su propio proveedor de Modelos de Lenguaje Grandes (LLM) y su clave de API (ej. usar su propia cuenta de Groq). |
| **Adaptabilidad** | El sistema puede cambiar din√°micamente entre el proveedor de IA por defecto del sistema y el configurado por el usuario, ofreciendo una flexibilidad avanzada. |